{"version":3,"file":"Login.js","sources":["../../src/assets/loginvideo.mp4","../../src/components/Login.jsx"],"sourcesContent":["export default \"__VITE_ASSET__BDYS8GhY__\"","import { useNavigate } from \"react-router-dom\";\r\nimport * as jwtDecode from \"jwt-decode\";\r\nimport { Box, Typography } from \"@mui/material\";\r\nimport { GoogleOAuthProvider, GoogleLogin } from \"@react-oauth/google\";\r\nimport Container from \"@mui/material/Container\";\r\nimport Snackbar from \"@mui/material/Snackbar\";\r\nimport { shareVideo } from \"../assets\";\r\nimport { client } from \"../client\";\r\nimport { useState } from \"react\";\r\nconst Login = () => {\r\n  const navigate = useNavigate();\r\n\r\n  // Managing state and function for notifications\r\n  const [state, setState] = useState({\r\n    open: false,\r\n    vertical: \"top\",\r\n    horizontal: \"center\",\r\n    message: \"\",\r\n  });\r\n  const { vertical, horizontal, open, message } = state;\r\n\r\n  const handleCloseAlert = () => {\r\n    setState({ ...state, open: false, message: \"\" });\r\n  };\r\n\r\n  const generateAlert = (msg) => {\r\n    const newState = { vertical: \"top\", horizontal: \"right\" };\r\n    setState({\r\n      ...newState,\r\n      open: true,\r\n      message: msg,\r\n    });\r\n  };\r\n\r\n  //End of notification actions\r\n\r\n  // Succesfull login function\r\n  const loginSuccess = (credentialResponse) => {\r\n    const decodedToken = jwtDecode.jwtDecode(credentialResponse.credential);\r\n\r\n    // Extract the name, ID, and imageURL from the decoded token\r\n    const { name, sub, picture } = decodedToken;\r\n\r\n    localStorage.setItem(\"user\", JSON.stringify(credentialResponse.credential));\r\n    const doc = {\r\n      _id: sub,\r\n      _type: \"user\",\r\n      userName: name,\r\n      image: picture,\r\n    };\r\n\r\n    client.createIfNotExists(doc).then(() => {\r\n      generateAlert(\"Succesfully logged in....\");\r\n      setTimeout(() => {\r\n        navigate(\"/\", { replace: true });\r\n      }, 1000);\r\n    });\r\n  };\r\n\r\n  // Login error function\r\n\r\n  const loginError = (err) => {\r\n    generateAlert(`Error: ${err}`);\r\n  };\r\n  return (\r\n    <GoogleOAuthProvider clientId={import.meta.env.VITE_GOOGLE_API_TOKEN}>\r\n      <Container\r\n        maxWidth=\"xl\"\r\n        disableGutters\r\n        sx={{\r\n          height: \"100vh\",\r\n          overflow: \"hidden\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <Snackbar\r\n          anchorOrigin={{ vertical, horizontal }}\r\n          open={open}\r\n          onClose={handleCloseAlert}\r\n          message={message}\r\n          key={vertical + horizontal}\r\n        />\r\n        <Box sx={{ position: \"relative\", width: \"100%\" }}>\r\n          <video\r\n            src={shareVideo}\r\n            type=\"video/mp4\"\r\n            loop\r\n            controls={false}\r\n            muted\r\n            autoPlay\r\n            style={{\r\n              width: \"100%\",\r\n              height: \"100vh\",\r\n              objectFit: \"cover\",\r\n            }}\r\n          />\r\n        </Box>\r\n        <Box\r\n          sx={{\r\n            position: \"absolute\",\r\n            top: \"50%\",\r\n            left: \"50%\",\r\n            transform: \"translate(-50%, -50%)\", // Center the box\r\n            color: \"white\",\r\n            fontSize: \"24px\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            gap: \"12px\",\r\n          }}\r\n        >\r\n          <Typography variant=\"h1\" fontSize={28} letterSpacing={2}>\r\n            FOTOPRAME\r\n          </Typography>\r\n          <GoogleLogin\r\n            onSuccess={(credentialResponse) => loginSuccess(credentialResponse)}\r\n            onError={(err) => {\r\n              loginError(err);\r\n            }}\r\n          />\r\n        </Box>\r\n      </Container>\r\n    </GoogleOAuthProvider>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"names":["shareVideo","Login","navigate","useNavigate","state","setState","useState","vertical","horizontal","open","message","handleCloseAlert","generateAlert","msg","loginSuccess","credentialResponse","decodedToken","jwtDecode.jwtDecode","name","sub","picture","doc","client","loginError","err","jsx","GoogleOAuthProvider","jsxs","Container","Snackbar","Box","Typography","GoogleLogin"],"mappings":"0JAAA,MAAeA,EAAA,kBCSTC,EAAQ,IAAM,CAClB,MAAMC,EAAWC,IAGX,CAACC,EAAOC,CAAQ,EAAIC,WAAS,CACjC,KAAM,GACN,SAAU,MACV,WAAY,SACZ,QAAS,EAAA,CACV,EACK,CAAE,SAAAC,EAAU,WAAAC,EAAY,KAAAC,EAAM,QAAAC,GAAYN,EAE1CO,EAAmB,IAAM,CAC7BN,EAAS,CAAE,GAAGD,EAAO,KAAM,GAAO,QAAS,GAAI,CAAA,EAG3CQ,EAAiBC,GAAQ,CAEpBR,EAAA,CACP,GAFe,CAAE,SAAU,MAAO,WAAY,OAAQ,EAGtD,KAAM,GACN,QAASQ,CAAA,CACV,CAAA,EAMGC,EAAgBC,GAAuB,CAC3C,MAAMC,EAAeC,EAAoBF,EAAmB,UAAU,EAGhE,CAAE,KAAAG,EAAM,IAAAC,EAAK,QAAAC,CAAA,EAAYJ,EAE/B,aAAa,QAAQ,OAAQ,KAAK,UAAUD,EAAmB,UAAU,CAAC,EAC1E,MAAMM,EAAM,CACV,IAAKF,EACL,MAAO,OACP,SAAUD,EACV,MAAOE,CAAA,EAGTE,EAAO,kBAAkBD,CAAG,EAAE,KAAK,IAAM,CACvCT,EAAc,2BAA2B,EACzC,WAAW,IAAM,CACfV,EAAS,IAAK,CAAE,QAAS,EAAM,CAAA,GAC9B,GAAI,CAAA,CACR,CAAA,EAKGqB,EAAcC,GAAQ,CACZZ,EAAA,UAAUY,CAAG,EAAE,CAAA,EAE/B,OACGC,EAAAA,IAAAC,EAAA,CAAoB,SAAU,2EAC7B,SAAAC,EAAA,KAACC,EAAA,CACC,SAAS,KACT,eAAc,GACd,GAAI,CACF,OAAQ,QACR,SAAU,SACV,QAAS,OACT,cAAe,SACf,eAAgB,SAChB,WAAY,QACd,EAEA,SAAA,CAAAH,EAAA,IAACI,EAAA,CACC,aAAc,CAAE,SAAAtB,EAAU,WAAAC,CAAW,EACrC,KAAAC,EACA,QAASE,EACT,QAAAD,CAAA,EACKH,EAAWC,CAClB,EACAiB,MAACK,GAAI,GAAI,CAAE,SAAU,WAAY,MAAO,QACtC,SAAAL,EAAA,IAAC,QAAA,CACC,IAAKzB,EACL,KAAK,YACL,KAAI,GACJ,SAAU,GACV,MAAK,GACL,SAAQ,GACR,MAAO,CACL,MAAO,OACP,OAAQ,QACR,UAAW,OACb,CAAA,CAAA,EAEJ,EACA2B,EAAA,KAACG,EAAA,CACC,GAAI,CACF,SAAU,WACV,IAAK,MACL,KAAM,MACN,UAAW,wBACX,MAAO,QACP,SAAU,OACV,QAAS,OACT,cAAe,SACf,eAAgB,SAChB,WAAY,SACZ,IAAK,MACP,EAEA,SAAA,CAAAL,EAAAA,IAACM,GAAW,QAAQ,KAAK,SAAU,GAAI,cAAe,EAAG,SAEzD,WAAA,CAAA,EACAN,EAAA,IAACO,EAAA,CACC,UAAYjB,GAAuBD,EAAaC,CAAkB,EAClE,QAAUS,GAAQ,CAChBD,EAAWC,CAAG,CAChB,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,GAEJ,CAEJ"}
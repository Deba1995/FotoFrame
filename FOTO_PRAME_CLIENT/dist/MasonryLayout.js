import{r as C,c as d,a as yr,_ as Pr,b as A,j as e,u as $r,n as _r,a2 as M,L as er}from"./index.js";import{T as O,M as Cr}from"./module.js";import{r as U,i as w,b as ar,I as j}from"./Home.js";import{a as Rr,g as zr,s as cr,w as nr,b as ir,d as Ir,j as Sr,B as _,S as Dr,A as kr,T as Tr,c as lr}from"./client.js";import{d as Mr}from"./Spinner.js";const dr=r=>{const t=C.useRef({});return C.useEffect(()=>{t.current=r}),t.current};function Lr(r){const{badgeContent:t,invisible:o=!1,max:n=99,showZero:i=!1}=r,u=dr({badgeContent:t,max:n});let s=o;o===!1&&t===0&&!i&&(s=!0);const{badgeContent:c,max:p=n}=s?u:r,g=c&&Number(c)>p?`${p}+`:c;return{badgeContent:c,invisible:s,max:p,displayValue:g}}function Ur(r){return zr("MuiBadge",r)}const wr=Rr("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),h=wr,Hr=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],E=10,W=4,Nr=r=>{const{color:t,anchorOrigin:o,invisible:n,overlap:i,variant:u,classes:s={}}=r,c={root:["root"],badge:["badge",u,n&&"invisible",`anchorOrigin${d(o.vertical)}${d(o.horizontal)}`,`anchorOrigin${d(o.vertical)}${d(o.horizontal)}${d(i)}`,`overlap${d(i)}`,t!=="default"&&`color${d(t)}`]};return Ir(c,Ur,s)},Vr=cr("span",{name:"MuiBadge",slot:"Root",overridesResolver:(r,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Fr=cr("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(r,t)=>{const{ownerState:o}=r;return[t.badge,t[o.variant],t[`anchorOrigin${d(o.anchorOrigin.vertical)}${d(o.anchorOrigin.horizontal)}${d(o.overlap)}`],o.color!=="default"&&t[`color${d(o.color)}`],o.invisible&&t.invisible]}})(({theme:r})=>{var t;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:r.typography.fontFamily,fontWeight:r.typography.fontWeightMedium,fontSize:r.typography.pxToRem(12),minWidth:E*2,lineHeight:1,padding:"0 6px",height:E*2,borderRadius:E,zIndex:1,transition:r.transitions.create("transform",{easing:r.transitions.easing.easeInOut,duration:r.transitions.duration.enteringScreen}),variants:[...Object.keys(((t=r.vars)!=null?t:r).palette).filter(o=>{var n,i;return((n=r.vars)!=null?n:r).palette[o].main&&((i=r.vars)!=null?i:r).palette[o].contrastText}).map(o=>({props:{color:o},style:{backgroundColor:(r.vars||r).palette[o].main,color:(r.vars||r).palette[o].contrastText}})),{props:{variant:"dot"},style:{borderRadius:W,height:W*2,minWidth:W*2,padding:0}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="top"&&o.anchorOrigin.horizontal==="right"&&o.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${h.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="bottom"&&o.anchorOrigin.horizontal==="right"&&o.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${h.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="top"&&o.anchorOrigin.horizontal==="left"&&o.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${h.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="bottom"&&o.anchorOrigin.horizontal==="left"&&o.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${h.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="top"&&o.anchorOrigin.horizontal==="right"&&o.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${h.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="bottom"&&o.anchorOrigin.horizontal==="right"&&o.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${h.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="top"&&o.anchorOrigin.horizontal==="left"&&o.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${h.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="bottom"&&o.anchorOrigin.horizontal==="left"&&o.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${h.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:r.transitions.create("transform",{easing:r.transitions.easing.easeInOut,duration:r.transitions.duration.leavingScreen})}}]}}),Ar=C.forwardRef(function(t,o){var n,i,u,s,c,p;const g=yr({props:t,name:"MuiBadge"}),{anchorOrigin:m={vertical:"top",horizontal:"right"},className:R,component:z,components:y={},componentsProps:P={},children:I,overlap:S="rectangular",color:D="default",invisible:H=!1,max:k=99,badgeContent:T,slots:f,slotProps:x,showZero:$=!1,variant:b="standard"}=g,a=Pr(g,Hr),{badgeContent:v,invisible:K,max:vr,displayValue:hr}=Lr({max:k,invisible:H,badgeContent:T,showZero:$}),mr=dr({anchorOrigin:m,color:D,overlap:S,variant:b,badgeContent:T}),Q=K||v==null&&b!=="dot",{color:fr=D,overlap:xr=S,anchorOrigin:br=m,variant:X=b}=Q?mr:g,Y=X!=="dot"?hr:void 0,N=A({},g,{badgeContent:v,invisible:Q,max:vr,displayValue:Y,showZero:$,anchorOrigin:br,color:fr,overlap:xr,variant:X}),rr=Nr(N),or=(n=(i=f==null?void 0:f.root)!=null?i:y.Root)!=null?n:Vr,tr=(u=(s=f==null?void 0:f.badge)!=null?s:y.Badge)!=null?u:Fr,V=(c=x==null?void 0:x.root)!=null?c:P.root,F=(p=x==null?void 0:x.badge)!=null?p:P.badge,Or=nr({elementType:or,externalSlotProps:V,externalForwardedProps:a,additionalProps:{ref:o,as:z},ownerState:N,className:ir(V==null?void 0:V.className,rr.root,R)}),jr=nr({elementType:tr,externalSlotProps:F,ownerState:N,className:ir(rr.badge,F==null?void 0:F.className)});return e.jsxs(or,A({},Or,{children:[I,e.jsx(tr,A({},jr,{children:Y}))]}))}),Er=Ar;let L;const Wr=new Uint8Array(16);function qr(){if(!L&&(L=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!L))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return L(Wr)}const l=[];for(let r=0;r<256;++r)l.push((r+256).toString(16).slice(1));function Br(r,t=0){return l[r[t+0]]+l[r[t+1]]+l[r[t+2]]+l[r[t+3]]+"-"+l[r[t+4]]+l[r[t+5]]+"-"+l[r[t+6]]+l[r[t+7]]+"-"+l[r[t+8]]+l[r[t+9]]+"-"+l[r[t+10]]+l[r[t+11]]+l[r[t+12]]+l[r[t+13]]+l[r[t+14]]+l[r[t+15]]}const Zr=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),sr={randomUUID:Zr};function Gr(r,t,o){if(sr.randomUUID&&!t&&!r)return sr.randomUUID();r=r||{};const n=r.random||(r.rng||qr)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){o=o||0;for(let i=0;i<16;++i)t[o+i]=n[i];return t}return Br(n)}var B={},Jr=w;Object.defineProperty(B,"__esModule",{value:!0});var q=B.default=void 0,Kr=Jr(U()),Qr=e,Xr=(0,Kr.default)((0,Qr.jsx)("path",{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"}),"PushPin");q=B.default=Xr;var Z={},Yr=w;Object.defineProperty(Z,"__esModule",{value:!0});var ur=Z.default=void 0,ro=Yr(U()),oo=e,to=(0,ro.default)((0,oo.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"}),"Share");ur=Z.default=to;var G={},eo=w;Object.defineProperty(G,"__esModule",{value:!0});var pr=G.default=void 0,ao=eo(U()),no=e,io=(0,ao.default)((0,no.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"}),"ChatBubbleOutlineOutlined");pr=G.default=io;var J={},lo=w;Object.defineProperty(J,"__esModule",{value:!0});var gr=J.default=void 0,so=lo(U()),co=e,uo=(0,so.default)((0,co.jsx)("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm-1 8V6h2v4h3l-4 4-4-4h3zm6 7H7v-2h10v2z"}),"DownloadForOffline");gr=J.default=uo;const po=({pin:{postedBy:r,image:t,_id:o,save:n,destination:i}})=>{var $,b;const[u,s]=C.useState(!1),c=$r(),p=_r(),g=Sr(p),{sub:m}=g,R=!!(($=n==null?void 0:n.filter(a=>{var v;return((v=a==null?void 0:a.postedBy)==null?void 0:v._id)===m}))!=null&&$.length),[z,y]=C.useState({open:!1,vertical:"top",horizontal:"center",message:""}),{vertical:P,horizontal:I,open:S,message:D}=z,H=()=>{y({...z,open:!1,message:""})},k=a=>{y({...{vertical:"top",horizontal:"center"},open:!0,message:a})},T=a=>{R||lr.patch(a).setIfMissing({save:[]}).insert("after","save[-1]",[{_key:Gr(),userId:m,postedBy:{_type:"postedBy",_ref:m}}]).commit().then(()=>{window.location.reload()})},f=a=>{lr.delete(a).then(()=>{window.location.reload()})},x=(a,v)=>{a.stopPropagation();try{navigator.clipboard.writeText(v),k("Link copied to clipboard!")}catch{k("Failed to copy link to clipboard:")}};return e.jsxs(_,{position:"relative",margin:1,sx:{cursor:u?"zoom-in":"pointer",overflow:"hidden"},onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),onClick:()=>c(`/pin-detail/${o}`),children:[e.jsx(Dr,{anchorOrigin:{vertical:P,horizontal:I},open:S,autoHideDuration:2e3,onClose:H,message:D},P+I),e.jsx(_,{sx:{width:"100%",maxHeight:"510px"},children:e.jsx(ar.LazyLoadImage,{src:kr(t).width(350).format("webp").url(),alt:"user-post",width:"100%",loading:"lazy",height:"100%",style:{objectFit:"cover",display:"block",transition:"transform .5s",transform:u?"scale(1.02)":"none",transformOrigin:"center"}})}),e.jsxs(e.Fragment,{children:[e.jsx(O,{title:"Download",children:e.jsx(j,{href:`${(b=t==null?void 0:t.asset)==null?void 0:b.url}?dl=`,"aria-label":"download",onClick:a=>{a.stopPropagation()},sx:{position:"absolute",top:0,left:0,opacity:.7,transition:"opacity 0.3s ease",":hover":{opacity:1}},children:e.jsx(gr,{sx:{color:M[50]}})})}),e.jsx(er,{to:`/user-profile/${r==null?void 0:r._id}`,style:{textDecoration:"none"},onClick:a=>{a.stopPropagation()},children:e.jsxs(_,{display:"flex",justifyContent:"space-between",alignItems:"center",gap:1,sx:{position:"absolute",bottom:2,left:2,borderRadius:"10px"},children:[e.jsx(ar.LazyLoadImage,{alt:"postedBy-profile-logo",effect:"blur",src:r==null?void 0:r.image,style:{width:"40px",height:"40px",borderRadius:"50%"}}),e.jsx(Tr,{variant:"caption",fontWeight:"semiBold",color:"#fff",sx:{textTransform:"capitalize"},children:(r==null?void 0:r.userName.length)>15?`${r==null?void 0:r.userName.slice(0,15)}...`:r==null?void 0:r.userName})]})}),e.jsxs(_,{display:"flex",flexDirection:"column",sx:{position:"absolute",bottom:0,right:0,opacity:.7,transition:"opacity 0.3s ease",":hover":{opacity:1}},children:[R?e.jsx(O,{title:"Pinned",children:e.jsx(j,{onClick:a=>{a.stopPropagation()},children:e.jsx(Er,{badgeContent:n==null?void 0:n.length,color:"error",children:e.jsx(q,{color:"error"})})})}):e.jsx(O,{title:"Pin",children:e.jsx(j,{onClick:a=>{a.stopPropagation(),T(o)},children:e.jsx(q,{sx:{color:M[50]}})})}),e.jsx(er,{to:`/pin-detail/${o}`,onClick:a=>{a.stopPropagation()},children:e.jsx(O,{title:"Comment",children:e.jsx(j,{children:e.jsx(pr,{sx:{color:M[50]}})})})}),e.jsx(O,{title:"Share",children:e.jsx(j,{onClick:a=>x(a,i),children:e.jsx(ur,{sx:{color:M[50]}})})}),(r==null?void 0:r._id)===m&&e.jsx(O,{title:"Remove",children:e.jsx(j,{onClick:a=>{a.stopPropagation(),f(o)},"aria-label":"remove",children:e.jsx(Mr,{color:"error"})})})]})]})]})},go={default:4,3e3:6,2e3:5,1200:4,1e3:3,500:2},bo=({pins:r})=>e.jsx(_,{padding:2,children:e.jsx(Cr,{breakpointCols:go,className:"masonry-layout",children:r==null?void 0:r.map(t=>e.jsx(po,{pin:t},t._id))})});export{bo as M,gr as d,Gr as v};
//# sourceMappingURL=MasonryLayout.js.map

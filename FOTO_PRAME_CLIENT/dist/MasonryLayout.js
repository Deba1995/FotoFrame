import{r as _,c as d,a as xr,_ as Or,b as F,j as a,u as yr,n as jr,a2 as H,L as Pr}from"./index.js";import{T as P,M as $r}from"./module.js";import{r as W,i as q,b as tr,I as $}from"./Home.js";import{a as Cr,g as _r,s as sr,w as ar,b as er,d as Rr,j as zr,B as C,S as Ir,A as Sr,T as Dr,c as nr}from"./client.js";import{d as Tr}from"./Spinner.js";const lr=r=>{const t=_.useRef({});return _.useEffect(()=>{t.current=r}),t.current};function kr(r){const{badgeContent:t,invisible:o=!1,max:n=99,showZero:i=!1}=r,p=lr({badgeContent:t,max:n});let l=o;o===!1&&t===0&&!i&&(l=!0);const{badgeContent:c,max:g=n}=l?p:r,u=c&&Number(c)>g?`${g}+`:c;return{badgeContent:c,invisible:l,max:g,displayValue:u}}function Mr(r){return _r("MuiBadge",r)}const Lr=Cr("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),v=Lr,Ur=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],V=10,A=4,wr=r=>{const{color:t,anchorOrigin:o,invisible:n,overlap:i,variant:p,classes:l={}}=r,c={root:["root"],badge:["badge",p,n&&"invisible",`anchorOrigin${d(o.vertical)}${d(o.horizontal)}`,`anchorOrigin${d(o.vertical)}${d(o.horizontal)}${d(i)}`,`overlap${d(i)}`,t!=="default"&&`color${d(t)}`]};return Rr(c,Mr,l)},Nr=sr("span",{name:"MuiBadge",slot:"Root",overridesResolver:(r,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Fr=sr("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(r,t)=>{const{ownerState:o}=r;return[t.badge,t[o.variant],t[`anchorOrigin${d(o.anchorOrigin.vertical)}${d(o.anchorOrigin.horizontal)}${d(o.overlap)}`],o.color!=="default"&&t[`color${d(o.color)}`],o.invisible&&t.invisible]}})(({theme:r})=>{var t;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:r.typography.fontFamily,fontWeight:r.typography.fontWeightMedium,fontSize:r.typography.pxToRem(12),minWidth:V*2,lineHeight:1,padding:"0 6px",height:V*2,borderRadius:V,zIndex:1,transition:r.transitions.create("transform",{easing:r.transitions.easing.easeInOut,duration:r.transitions.duration.enteringScreen}),variants:[...Object.keys(((t=r.vars)!=null?t:r).palette).filter(o=>{var n,i;return((n=r.vars)!=null?n:r).palette[o].main&&((i=r.vars)!=null?i:r).palette[o].contrastText}).map(o=>({props:{color:o},style:{backgroundColor:(r.vars||r).palette[o].main,color:(r.vars||r).palette[o].contrastText}})),{props:{variant:"dot"},style:{borderRadius:A,height:A*2,minWidth:A*2,padding:0}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="top"&&o.anchorOrigin.horizontal==="right"&&o.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${v.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="bottom"&&o.anchorOrigin.horizontal==="right"&&o.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${v.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="top"&&o.anchorOrigin.horizontal==="left"&&o.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${v.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="bottom"&&o.anchorOrigin.horizontal==="left"&&o.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${v.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="top"&&o.anchorOrigin.horizontal==="right"&&o.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${v.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="bottom"&&o.anchorOrigin.horizontal==="right"&&o.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${v.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="top"&&o.anchorOrigin.horizontal==="left"&&o.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${v.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="bottom"&&o.anchorOrigin.horizontal==="left"&&o.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${v.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:r.transitions.create("transform",{easing:r.transitions.easing.easeInOut,duration:r.transitions.duration.leavingScreen})}}]}}),Hr=_.forwardRef(function(t,o){var n,i,p,l,c,g;const u=xr({props:t,name:"MuiBadge"}),{anchorOrigin:m={vertical:"top",horizontal:"right"},className:R,component:z,components:O={},componentsProps:y={},children:I,overlap:S="rectangular",color:D="default",invisible:L=!1,max:T=99,badgeContent:k,slots:f,slotProps:b,showZero:j=!1,variant:x="standard"}=u,e=Or(u,Ur),{badgeContent:h,invisible:J,max:pr,displayValue:gr}=kr({max:T,invisible:L,badgeContent:k,showZero:j}),ur=lr({anchorOrigin:m,color:D,overlap:S,variant:x,badgeContent:k}),K=J||h==null&&x!=="dot",{color:hr=D,overlap:vr=S,anchorOrigin:mr=m,variant:Q=x}=K?ur:u,X=Q!=="dot"?gr:void 0,U=F({},u,{badgeContent:h,invisible:K,max:pr,displayValue:X,showZero:j,anchorOrigin:mr,color:hr,overlap:vr,variant:Q}),Y=wr(U),rr=(n=(i=f==null?void 0:f.root)!=null?i:O.Root)!=null?n:Nr,or=(p=(l=f==null?void 0:f.badge)!=null?l:O.Badge)!=null?p:Fr,w=(c=b==null?void 0:b.root)!=null?c:y.root,N=(g=b==null?void 0:b.badge)!=null?g:y.badge,fr=ar({elementType:rr,externalSlotProps:w,externalForwardedProps:e,additionalProps:{ref:o,as:z},ownerState:U,className:er(w==null?void 0:w.className,Y.root,R)}),br=ar({elementType:or,externalSlotProps:N,ownerState:U,className:er(Y.badge,N==null?void 0:N.className)});return a.jsxs(rr,F({},fr,{children:[I,a.jsx(or,F({},br,{children:X}))]}))}),Vr=Hr;let M;const Ar=new Uint8Array(16);function Er(){if(!M&&(M=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!M))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return M(Ar)}const s=[];for(let r=0;r<256;++r)s.push((r+256).toString(16).slice(1));function Wr(r,t=0){return s[r[t+0]]+s[r[t+1]]+s[r[t+2]]+s[r[t+3]]+"-"+s[r[t+4]]+s[r[t+5]]+"-"+s[r[t+6]]+s[r[t+7]]+"-"+s[r[t+8]]+s[r[t+9]]+"-"+s[r[t+10]]+s[r[t+11]]+s[r[t+12]]+s[r[t+13]]+s[r[t+14]]+s[r[t+15]]}const qr=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ir={randomUUID:qr};function Zr(r,t,o){if(ir.randomUUID&&!t&&!r)return ir.randomUUID();r=r||{};const n=r.random||(r.rng||Er)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){o=o||0;for(let i=0;i<16;++i)t[o+i]=n[i];return t}return Wr(n)}var Z={},Br=q;Object.defineProperty(Z,"__esModule",{value:!0});var E=Z.default=void 0,Gr=Br(W()),Jr=a,Kr=(0,Gr.default)((0,Jr.jsx)("path",{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"}),"PushPin");E=Z.default=Kr;var B={},Qr=q;Object.defineProperty(B,"__esModule",{value:!0});var cr=B.default=void 0,Xr=Qr(W()),Yr=a,ro=(0,Xr.default)((0,Yr.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"}),"Share");cr=B.default=ro;var G={},oo=q;Object.defineProperty(G,"__esModule",{value:!0});var dr=G.default=void 0,to=oo(W()),ao=a,eo=(0,to.default)((0,ao.jsx)("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm-1 8V6h2v4h3l-4 4-4-4h3zm6 7H7v-2h10v2z"}),"DownloadForOffline");dr=G.default=eo;const no=({pin:{postedBy:r,image:t,_id:o,save:n,destination:i}})=>{var j,x;const[p,l]=_.useState(!1),c=yr(),g=jr(),u=zr(g),{sub:m}=u,R=!!((j=n==null?void 0:n.filter(e=>{var h;return((h=e==null?void 0:e.postedBy)==null?void 0:h._id)===m}))!=null&&j.length),[z,O]=_.useState({open:!1,vertical:"top",horizontal:"center",message:""}),{vertical:y,horizontal:I,open:S,message:D}=z,L=()=>{O({...z,open:!1,message:""})},T=e=>{O({...{vertical:"top",horizontal:"center"},open:!0,message:e})},k=e=>{R||nr.patch(e).setIfMissing({save:[]}).insert("after","save[-1]",[{_key:Zr(),userId:m,postedBy:{_type:"postedBy",_ref:m}}]).commit().then(()=>{window.location.reload()})},f=e=>{nr.delete(e).then(()=>{window.location.reload()})},b=(e,h)=>{e.stopPropagation();try{navigator.clipboard.writeText(h),T("Link copied to clipboard!")}catch{T("Failed to copy link to clipboard:")}};return a.jsxs(C,{position:"relative",margin:1,sx:{cursor:p?"zoom-in":"pointer",overflow:"hidden"},onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onClick:()=>c(`/pin-detail/${o}`),children:[a.jsx(Ir,{anchorOrigin:{vertical:y,horizontal:I},open:S,autoHideDuration:2e3,onClose:L,message:D},y+I),a.jsx(C,{sx:{width:"100%",maxHeight:"510px"},children:a.jsx(tr.LazyLoadImage,{src:Sr(t).width(350).format("webp").url(),alt:"user-post",width:350,loading:"lazy",height:"100%",style:{objectFit:"cover",display:"block",transition:"transform .5s",transform:p?"scale(1.02)":"none",transformOrigin:"center"}})}),a.jsxs(a.Fragment,{children:[a.jsx(P,{title:"Download",children:a.jsx($,{href:`${(x=t==null?void 0:t.asset)==null?void 0:x.url}?dl=`,"aria-label":"download",onClick:e=>{e.stopPropagation()},sx:{position:"absolute",top:0,left:0,opacity:.7,transition:"opacity 0.3s ease",":hover":{opacity:1}},children:a.jsx(dr,{sx:{color:H[50]}})})}),a.jsx(Pr,{to:`/user-profile/${r==null?void 0:r._id}`,style:{textDecoration:"none"},onClick:e=>{e.stopPropagation()},children:a.jsxs(C,{display:"flex",justifyContent:"space-between",alignItems:"center",gap:1,sx:{position:"absolute",bottom:2,left:2,borderRadius:"10px"},children:[a.jsx(tr.LazyLoadImage,{alt:"postedBy-profile-logo",effect:"blur",src:r==null?void 0:r.image,style:{width:"40px",height:"40px",borderRadius:"50%"},loading:"lazy"}),a.jsx(Dr,{variant:"caption",fontWeight:"semiBold",color:"#fff",sx:{textTransform:"capitalize"},children:(r==null?void 0:r.userName.length)>15?`${r==null?void 0:r.userName.slice(0,15)}...`:r==null?void 0:r.userName})]})}),a.jsxs(C,{display:"flex",flexDirection:"column",sx:{position:"absolute",bottom:0,right:0,opacity:.7,transition:"opacity 0.3s ease",":hover":{opacity:1}},children:[R?a.jsx(P,{title:"Pinned",children:a.jsx($,{onClick:e=>{e.stopPropagation()},children:a.jsx(Vr,{badgeContent:n==null?void 0:n.length,color:"error",children:a.jsx(E,{color:"error"})})})}):a.jsx(P,{title:"Pin",children:a.jsx($,{onClick:e=>{e.stopPropagation(),k(o)},children:a.jsx(E,{sx:{color:H[50]}})})}),a.jsx(P,{title:"Share",children:a.jsx($,{onClick:e=>b(e,i),children:a.jsx(cr,{sx:{color:H[50]}})})}),(r==null?void 0:r._id)===m&&a.jsx(P,{title:"Remove",children:a.jsx($,{onClick:e=>{e.stopPropagation(),f(o)},"aria-label":"remove",children:a.jsx(Tr,{color:"error"})})})]})]})]})},io={default:4,3e3:6,2e3:5,1200:4,1e3:3,500:2},uo=({pins:r})=>a.jsx(C,{padding:2,children:a.jsx($r,{breakpointCols:io,className:"masonry-layout",children:r==null?void 0:r.map(t=>a.jsx(no,{pin:t},t._id))})});export{uo as M,dr as d,Zr as v};
//# sourceMappingURL=MasonryLayout.js.map
